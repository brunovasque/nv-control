<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>ENAVIA ‚Äî Control Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <meta
  http-equiv="Content-Security-Policy"
  content="
    default-src 'self';
    script-src 'self' 'unsafe-inline';
    connect-src 'self' http://167.71.116.105:3100;
    img-src 'self' data: blob:;
    style-src 'self' 'unsafe-inline';
  "
/>

  <!-- CSS PRINCIPAL -->
  <link rel="stylesheet" href="./style.css" />
</head>

<body>

  <!-- =========================
       APP ROOT
  ========================== -->
  <div class="app-root">

    <!-- =========================
         SIDEBAR ESQUERDA
    ========================== -->
    <aside class="sidebar">

      <div class="sidebar-header">
        <div class="logo">ENAVIA</div>
        <div class="subtitle">Painel de Controle</div>
      </div>

      <!-- MODOS / CANAIS -->
      <nav class="sidebar-section">
        <div class="section-title">Modos</div>

        <button class="sidebar-btn active" data-mode="director">
          Director
        </button>

        <button class="sidebar-btn" data-mode="telemetry">
          Telemetria
        </button>

        <button class="sidebar-btn" data-mode="history">
          Hist√≥rico
        </button>

        <button class="sidebar-btn" data-mode="advanced">
          Avan√ßado
        </button>
      </nav>

      <!-- A√á√ïES -->
      <nav class="sidebar-section">
        <div class="section-title">A√ß√µes</div>

        <button class="sidebar-btn" data-action="view-director-enavia-chat">
          Visualizar conversa<br>
          Director ‚áÑ ENAVIA
        </button>
      </nav>

    </aside>

    <!-- =========================
         √ÅREA PRINCIPAL
    ========================== -->
    <main class="main-area">

      <!-- =========================
           HEADER SUPERIOR
      ========================== -->
      <header class="top-bar">

        <div class="execution-info">
          <span class="label">Execution ID:</span>
          <span class="value" id="executionId">‚Äî</span>
        </div>

        <div class="status-info">
          <span class="label">Status:</span>
          <span class="status-pill neutral" id="statusPill">Aguardando</span>
        </div>

      </header>

      <!-- =========================
           CONTE√öDO CENTRAL
      ========================== -->
      <section class="content-area">

        <!-- =========================
             CHAT PRINCIPAL (DIRECTOR)
        ========================== -->
        <div class="chat-container">

          <div class="chat-messages" id="chatMessages">

            <!-- BOAS-VINDAS -->
            <div class="chat-message role-director">
              <div class="chat-role">Director</div>
              <div class="chat-text">
                Ol√°.<br><br>
                Este √© o painel de controle da ENAVIA.<br><br>
                Descreva o que voc√™ quer fazer, ou envie um patch para iniciarmos
                a an√°lise com seguran√ßa.
              </div>
            </div>

          </div>

          <!-- INPUT -->
          <div class="chat-input-container">
            <textarea
              id="chatInput"
              class="chat-input"
              placeholder="Escreva aqui‚Ä¶"
              rows="1"
            ></textarea>
            <button id="sendBtn" class="send-btn">Enviar</button>
          </div>

        </div>

        <!-- =========================
             PAINEL DE BOT√ïES (DIREITA)
        ========================== -->
        <aside class="actions-panel">

          <div class="actions-header">
            Fluxo de Deploy
          </div>

          <button class="action-btn disabled" data-action="audit">
            AUDIT
          </button>

          <button class="action-btn disabled" data-action="propose">
            PROPOSE
          </button>

          <button class="action-btn disabled" data-action="apply-test">
            APPLY TEST
          </button>

          <button class="action-btn disabled" data-action="deploy-test">
            DEPLOY TESTE
          </button>

          <button class="action-btn disabled" data-action="approve">
            APPROVE
          </button>

          <button class="action-btn disabled" data-action="promote-real">
            PROMOTE REAL
          </button>

          <div class="divider"></div>

          <button class="action-btn danger disabled" data-action="rollback">
            ROLLBACK
          </button>

          <button class="action-btn secondary" data-action="cancel">
            CANCELAR
          </button>

        </aside>

      </section>

      <!-- =========================
           ALERTA CENTRAL
      ========================== -->
      <div class="center-alert hidden" id="centerAlert">
        <div class="alert-box">
          <div class="alert-title">‚ö†Ô∏è A√ß√£o bloqueada</div>
          <div class="alert-text" id="centerAlertText">
            Esta a√ß√£o ainda n√£o est√° dispon√≠vel no fluxo atual.
          </div>
        </div>
      </div>

    </main>

  </div>

  <!-- üîó EXECUTOR (CONFIGURA√á√ÉO GLOBAL) -->
<script>
  window.EXECUTOR_URL = "http://167.71.116.105:3100";
</script>

<!-- üîó CLIENTE DO EXECUTOR (FRONTEND PURO) -->
<script src="./browser-executor.js"></script>

  <!-- ‚úÖ SCRIPT PRINCIPAL (OBRIGAT√ìRIO PARA VERCEL) -->
  <script type="module" src="./script.js"></script>

</body>
</html>


